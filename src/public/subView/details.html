<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KULI - Product Details</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #8B7D8B 0%, #A69DA6 50%, #B8A9B8 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo a {
            font-size: 28px;
            font-weight: bold;
            color: white;
            letter-spacing: 3px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-btn {
            color: white;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 10px 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .product-container {
            max-width: 1400px;
            margin: 120px auto 50px;
            padding: 0 50px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: start;
        }

        .product-gallery {
            position: sticky;
            top: 140px;
        }

        .main-image {
            width: 100%;
            height: 500px;
            background: linear-gradient(45deg, #FFB6C1, #DDA0DD, #98FB98, #F0E68C, #87CEEB, #FFB6C1);
            background-size: 300% 300%;
            animation: gradientShift 8s ease infinite;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8rem;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            cursor: zoom-in;
            transition: all 0.4s ease;
        }

        .main-image:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .thumbnail-gallery {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #FFB6C1, #DDA0DD);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .thumbnail:hover, .thumbnail.active {
            border-color: white;
            transform: scale(1.1);
        }

        .product-info {
            color: white;
        }

        .breadcrumb {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        .breadcrumb a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #FFB6C1;
        }

        .product-title {
            font-size: 2.5rem;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 10px;
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { text-shadow: 2px 2px 8px rgba(0,0,0,0.3); }
            100% { text-shadow: 2px 2px 20px rgba(255,255,255,0.3); }
        }

        .product-category {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .rating-section {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .stars {
            display: flex;
            gap: 3px;
        }

        .star {
            color: #FFD700;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .star.empty {
            color: rgba(255, 255, 255, 0.3);
        }

        .rating-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .price-section {
            margin-bottom: 30px;
        }

        .current-price {
            font-size: 3rem;
            color: #FFB6C1;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .original-price {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: line-through;
            margin-right: 15px;
        }

        .discount-badge {
            background: linear-gradient(135deg, #FF4757, #FF6B7A);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .product-description {
            margin-bottom: 30px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        .product-options {
            margin-bottom: 30px;
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .size-options, .color-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .option-btn {
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: transparent;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .option-btn:hover, .option-btn.active {
            border-color: #FFB6C1;
            background: rgba(255, 182, 193, 0.2);
            transform: translateY(-2px);
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .color-option:hover, .color-option.active {
            border-color: white;
            transform: scale(1.1);
        }

        .color-option.gold { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .color-option.silver { background: linear-gradient(135deg, #C0C0C0, #A8A8A8); }
        .color-option.rose-gold { background: linear-gradient(135deg, #E8B4B8, #D4A5A5); }

        .quantity-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .quantity-label {
            font-weight: bold;
            letter-spacing: 1px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            overflow: hidden;
        }

        .quantity-btn {
            background: none;
            border: none;
            color: white;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .quantity-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .quantity-input {
            background: none;
            border: none;
            color: white;
            text-align: center;
            width: 60px;
            padding: 10px;
            font-size: 1rem;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
        }

        .btn-primary, .btn-secondary {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FFB6C1, #DDA0DD);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .btn-primary:hover, .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #FF9FAB, #C8A2C8);
        }

        .product-features {
            margin-bottom: 40px;
        }

        .features-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .features-list {
            list-style: none;
        }

        .features-list li {
            padding: 8px 0;
            color: rgba(255, 255, 255, 0.8);
            position: relative;
            padding-left: 25px;
        }

        .features-list li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #90EE90;
            font-weight: bold;
        }

        .reviews-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px;
            margin-top: 50px;
            grid-column: 1 / -1;
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .reviews-title {
            font-size: 1.8rem;
            color: white;
            letter-spacing: 1px;
        }

        .write-review-btn {
            background: linear-gradient(135deg, #FFB6C1, #DDA0DD);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .write-review-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .review-stats {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .overall-rating {
            text-align: center;
        }

        .overall-score {
            font-size: 3rem;
            color: #FFB6C1;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .overall-stars {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 10px;
        }

        .rating-breakdown {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .rating-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rating-label {
            color: rgba(255, 255, 255, 0.8);
            min-width: 60px;
        }

        .bar-container {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .rating-count {
            color: rgba(255, 255, 255, 0.6);
            min-width: 40px;
            text-align: right;
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .review-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .reviewer-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #FFB6C1, #DDA0DD);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .reviewer-details h4 {
            color: white;
            margin-bottom: 5px;
        }

        .review-date {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .review-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            opacity: 0.1;
            animation: floating 12s ease-in-out infinite;
            font-size: 2rem;
        }

        .floating-element:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .floating-element:nth-child(2) { top: 20%; right: 10%; animation-delay: 2s; }
        .floating-element:nth-child(3) { top: 40%; left: 15%; animation-delay: 4s; }

        @keyframes floating {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            25% { transform: translateY(-30px) rotate(5deg); opacity: 0.2; }
            50% { transform: translateY(-15px) rotate(-3deg); opacity: 0.15; }
            75% { transform: translateY(-25px) rotate(2deg); opacity: 0.18; }
        }

        @media (max-width: 1024px) {
            .product-container {
                grid-template-columns: 1fr;
                gap: 40px;
                margin-top: 100px;
                padding: 0 25px;
            }

            .product-gallery {
                position: static;
            }

            .review-stats {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .header {
                padding: 15px 25px;
            }
        }

        @media (max-width: 768px) {
            .product-title {
                font-size: 2rem;
            }

            .current-price {
                font-size: 2.5rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .reviews-section {
                padding: 25px;
            }
        }
        /* Change from: */
        .product-gallery {
            position: sticky;
            top: 140px;
        }

        /* To: */
        .product-gallery {
            position: relative; /* Change to relative positioning */
            margin-bottom: 40px; /* Add some space below the gallery */
        }

        .nav-icons {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .cart-icon {
            position: relative;
            color: white;
            font-size: 24px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #FF4757, #FF6B7A);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: cartBadgePulse 2s ease-in-out infinite;
        }

        @keyframes cartBadgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes cartIconBounce {
            0%, 100% { transform: scale(1) translateY(0); }
            25% { transform: scale(1.1) translateY(-3px); }
            50% { transform: scale(1.2) translateY(-5px); }
            75% { transform: scale(1.1) translateY(-2px); }
        }
        </style>
</head>
<body>
    <div class="floating-elements">
        <div class="floating-element">💎</div>
        <div class="floating-element">✨</div>
        <div class="floating-element">💍</div>
    </div>

    <header class="header">
        <div class="logo"><a href="/home_view/homePage">KULI</a></div>
        
        <div class="nav-icons">
            <a href="/subView/cart" class="cart-icon" id="cartIcon">
                🛒
                <span class="cart-badge" id="cartBadge">0</span>
            </a>
            <a href="/subView/allProducts" class="back-btn">
                ← Back to Products
            </a>
        </div>
    </header>

    <div class="product-container">
        <div class="product-gallery">
            <div class="main-image" id="mainImage">
                <span id="mainIcon">💍</span>
            </div>
            <div class="thumbnail-gallery">
                <div class="thumbnail active" data-icon="💍">💍</div>
                <div class="thumbnail" data-icon="✨">✨</div>
                <div class="thumbnail" data-icon="💎">💎</div>
                <div class="thumbnail" data-icon="🌟">🌟</div>
            </div>
        </div>

        <div class="product-info">
            <div class="breadcrumb">
                <a href="/home_view/homePage">Home</a> > 
                <a href="/subView/allProducts">Products</a> > 
                <span id="productCategory">Rings</span>
            </div>

            <h1 class="product-title" id="productTitle">Diamond Eternity Ring</h1>
            <p class="product-category" id="categoryDisplay">Premium Rings Collection</p>

            <div class="rating-section">
                <div class="stars" id="productStars">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                </div>
                <span class="rating-text" id="ratingText">4.8 out of 5 (234 reviews)</span>
            </div>

            <div class="price-section">
                <div class="current-price" id="currentPrice">$1,299</div>
                <div>
                    <span class="original-price" id="originalPrice">$1,799</span>
                    <span class="discount-badge">28% OFF</span>
                </div>
            </div>

            <div class="product-description" id="productDescription">
                Crafted with precision and elegance, this stunning diamond eternity ring features brilliant-cut diamonds set in premium metal. Perfect for engagements, anniversaries, or as a symbol of eternal love. Each piece is carefully inspected to ensure the highest quality and craftsmanship.
            </div>

            <div class="product-options">
                <div class="option-group">
                    <label class="option-label">Size:</label>
                    <div class="size-options">
                        <button class="option-btn" data-size="5">5</button>
                        <button class="option-btn active" data-size="6">6</button>
                        <button class="option-btn" data-size="7">7</button>
                        <button class="option-btn" data-size="8">8</button>
                        <button class="option-btn" data-size="9">9</button>
                    </div>
                </div>

                <div class="option-group">
                    <label class="option-label">Metal:</label>
                    <div class="color-options">
                        <div class="color-option gold active" data-metal="gold" title="Gold"></div>
                        <div class="color-option silver" data-metal="silver" title="Silver"></div>
                        <div class="color-option rose-gold" data-metal="rose-gold" title="Rose Gold"></div>
                    </div>
                </div>
            </div>

            <div class="quantity-section">
                <span class="quantity-label">Quantity:</span>
                <div class="quantity-controls">
                    <button class="quantity-btn" id="decreaseBtn">−</button>
                    <input type="number" class="quantity-input" id="quantityInput" value="1" min="1" max="10">
                    <button class="quantity-btn" id="increaseBtn">+</button>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn-primary" id="addToCartBtn">Add to Cart</button>
                <button class="btn-secondary" id="wishlistBtn">♡ Add to Wishlist</button>
            </div>

            <div class="product-features">
                <h3 class="features-title">Product Features</h3>
                <ul class="features-list">
                    <li>Premium quality materials</li>
                    <li>Handcrafted by skilled artisans</li>
                    <li>Lifetime warranty included</li>
                    <li>Free resizing within 30 days</li>
                    <li>Comes with certificate of authenticity</li>
                    <li>Gift packaging included</li>
                </ul>
            </div>
        </div>

        <div class="reviews-section">
            <div class="reviews-header">
                <h2 class="reviews-title">Customer Reviews</h2>
                <button class="write-review-btn">Write a Review</button>
            </div>

            <div class="review-stats">
                <div class="overall-rating">
                    <div class="overall-score">4.8</div>
                    <div class="overall-stars">
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <div class="rating-text">Based on 234 reviews</div>
                </div>

                <div class="rating-breakdown">
                    <div class="rating-bar">
                        <span class="rating-label">5 stars</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 75%"></div>
                        </div>
                        <span class="rating-count">175</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">4 stars</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 15%"></div>
                        </div>
                        <span class="rating-count">35</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">3 stars</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 8%"></div>
                        </div>
                        <span class="rating-count">19</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">2 stars</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 2%"></div>
                        </div>
                        <span class="rating-count">5</span>
                    </div>
                    <div class="rating-bar">
                        <span class="rating-label">1 star</span>
                        <div class="bar-container">
                            <div class="bar-fill" style="width: 0%"></div>
                        </div>
                        <span class="rating-count">0</span>
                    </div>
                </div>
            </div>

            <div class="reviews-list">
                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">S</div>
                            <div class="reviewer-details">
                                <h4>Sarah M.</h4>
                                <div class="stars">
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                </div>
                            </div>
                        </div>
                        <div class="review-date">2 weeks ago</div>
                    </div>
                    <div class="review-content">
                        Absolutely stunning ring! The quality is exceptional and it arrived beautifully packaged. My fiancé was thrilled with the sparkle and craftsmanship. Highly recommend KULI for their attention to detail.
                    </div>
                </div>

                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">M</div>
                            <div class="reviewer-details">
                                <h4>Michael R.</h4>
                                <div class="stars">
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                </div>
                            </div>
                        </div>
                        <div class="review-date">1 month ago</div>
                    </div>
                    <div class="review-content">
                        Perfect for our anniversary gift. The diamonds are brilliant and the setting is solid. Customer service was excellent throughout the process.
                    </div>
                </div>

                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">E</div>
                            <div class="reviewer-details">
                                <h4>Emma L.</h4>
                                <div class="stars">
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star">★</span>
                                    <span class="star empty">★</span>
                                </div>
                            </div>
                        </div>
                        <div class="review-date">2 months ago</div>
                    </div>
                    <div class="review-content">
                        Beautiful ring with amazing sparkle. Only minor issue was the delivery took a bit longer than expected, but the quality made up for it completely.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample product data - this would normally come from your backend
        const productData = {
            1: { name: "Diamond Eternity Ring", category: "rings", price: "$1,299", originalPrice: "$1,799", icon: "💍", rating: 4.8, reviews: 234 },
            2: { name: "Pearl Drop Earrings", category: "earrings", price: "$899", originalPrice: "$1,199", icon: "👂", rating: 4.6, reviews: 156 },
            3: { name: "Gold Chain Necklace", category: "necklaces", price: "$1,599", originalPrice: "$2,099", icon: "🔗", rating: 4.9, reviews: 298 },
            4: { name: "Tennis Bracelet", category: "bracelets", price: "$2,199", originalPrice: "$2,799", icon: "📿", rating: 4.7, reviews: 187 },
            5: { name: "Sapphire Solitaire Ring", category: "rings", price: "$3,299", originalPrice: "$4,199", icon: "💍", rating: 4.9, reviews: 342 },
            6: { name: "Crystal Chandelier Earrings", category: "earrings", price: "$1,099", originalPrice: "$1,399", icon: "👂", rating: 4.5, reviews: 128 },
        };
        

                // Cart management
        let cartItems = [];

        function updateCartBadge() {
            const cartBadge = document.getElementById('cartBadge');
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            cartBadge.textContent = totalItems;
            
            if (totalItems > 0) {
                cartBadge.style.display = 'flex';
            } else {
                cartBadge.style.display = 'none';
            }
        }

        function addToCart(productId, size, metal, quantity) {
            const product = productData[productId];
            
            // Check if item already exists in cart
            const existingItem = cartItems.find(item => 
                item.id === productId && item.size === size && item.metal === metal
            );
            
            if (existingItem) {
                existingItem.quantity += parseInt(quantity);
            } else {
                cartItems.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    icon: product.icon,
                    size: size,
                    metal: metal,
                    quantity: parseInt(quantity)
                });
            }
            
            updateCartBadge();
            
            // Store cart in sessionStorage (or send to backend)
            sessionStorage.setItem('cartItems', JSON.stringify(cartItems));
        }

        // Get product ID from URL
        function getProductIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            return productId ? parseInt(productId) : 1; // Default to product 1 if no ID specified
        }

        // Load product data
        function loadProductData(productId) {
            const product = productData[productId];
            
            if (!product) {
                console.error('Product not found');
                return;
            }

            // Update product details
            document.getElementById('mainIcon').innerText = product.icon;
            document.getElementById('productTitle').innerText = product.name;
            document.getElementById('productCategory').innerText = product.category;
            document.getElementById('categoryDisplay').innerText = `Premium ${product.category.charAt(0).toUpperCase() + product.category.slice(1)} Collection`;
            document.getElementById('currentPrice').innerText = product.price;
            document.getElementById('originalPrice').innerText = product.originalPrice;
            document.getElementById('ratingText').innerText = `${product.rating} out of 5 (${product.reviews} reviews)`;

            // Update overall review stats
            document.querySelector('.overall-score').innerText = product.rating;
            document.querySelector('.rating-text').innerText = `Based on ${product.reviews} reviews`;

            // Update title
            document.title = `KULI - ${product.name}`;

            // Update stars based on rating
            updateStars(product.rating);
        }

        // Update stars display
        function updateStars(rating) {
            const stars = document.getElementById('productStars').children;
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;

            for (let i = 0; i < stars.length; i++) {
                if (i < fullStars) {
                    stars[i].className = 'star';
                } else if (i === fullStars && hasHalfStar) {
                    stars[i].className = 'star half';
                } else {
                    stars[i].className = 'star empty';
                }
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            const productId = getProductIdFromUrl();
            loadProductData(productId);
            
            initializeThumbnails();
            initializeQuantity();
            initializeButtons();
            initializeSizeOptions();
            initializeColorOptions();
            initializeImageZoom();
            const returnFilter = getUrlParameter('returnFilter');
    
            // Update back button
            const backBtn = document.querySelector('.back-btn');
            if (returnFilter) {
                backBtn.href = `/allProducts?filter=${returnFilter}`;
            }

                const savedCart = sessionStorage.getItem('cartItems');
                    if (savedCart) {
                        cartItems = JSON.parse(savedCart);
                        updateCartBadge();
                    }
        });

        // Initialize thumbnail functionality
        function initializeThumbnails() {
            const thumbnails = document.querySelectorAll('.thumbnail');
            const mainImage = document.getElementById('mainIcon');

            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function() {
                    // Update active state
                    thumbnails.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update main image
                    mainImage.innerText = this.dataset.icon;

                    // Add animation
                    mainImage.style.animation = 'none';
                    setTimeout(() => {
                        mainImage.style.animation = 'gradientShift 8s ease infinite';
                    }, 10);
                });
            });
        }

        // Initialize quantity controls
        function initializeQuantity() {
            const decreaseBtn = document.getElementById('decreaseBtn');
            const increaseBtn = document.getElementById('increaseBtn');
            const quantityInput = document.getElementById('quantityInput');

            decreaseBtn.addEventListener('click', function() {
                const currentValue = parseInt(quantityInput.value);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                }
            });

            increaseBtn.addEventListener('click', function() {
                const currentValue = parseInt(quantityInput.value);
                if (currentValue < 10) {
                    quantityInput.value = currentValue + 1;
                }
            });

            quantityInput.addEventListener('change', function() {
                let value = parseInt(this.value);
                if (isNaN(value) || value < 1) {
                    value = 1;
                } else if (value > 10) {
                    value = 10;
                }
                this.value = value;
            });
        }

        // Initialize buttons
        function initializeButtons() {
            const addToCartBtn = document.getElementById('addToCartBtn');
            const wishlistBtn = document.getElementById('wishlistBtn');

            addToCartBtn.addEventListener('click', function() {
                // Get selected options
                const size = document.querySelector('.size-options .option-btn.active').dataset.size;
                const metal = document.querySelector('.color-options .color-option.active').dataset.metal;
                const quantity = document.getElementById('quantityInput').value;
                const productId = getProductIdFromUrl();
                
                addToCart(productId, size, metal, quantity);

                // Log add to cart action (would be an API call in a real application)
                console.log(`Added to cart: Product ID ${productId}, Size: ${size}, Metal: ${metal}, Quantity: ${quantity}`);
                
                // Show success animation
                this.innerHTML = '<span style="display: inline-block; transform: translateY(-2px);">✓</span> Added to Cart';
                this.style.background = 'linear-gradient(135deg, #90EE90, #32CD32)';
                
                // Create ripple effect
                const ripple = document.createElement('div');
                ripple.style.position = 'absolute';
                ripple.style.width = '5px';
                ripple.style.height = '5px';
                ripple.style.background = 'rgba(255, 255, 255, 0.8)';
                ripple.style.borderRadius = '50%';
                ripple.style.top = '50%';
                ripple.style.left = '50%';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.animation = 'cartRipple 0.6s linear forwards';
                
                this.style.overflow = 'hidden';
                this.style.position = 'relative';
                this.appendChild(ripple);

                const cartIcon = document.getElementById('cartIcon');
                cartIcon.style.animation = 'cartIconBounce 0.6s ease';
                
                setTimeout(() => {
                    cartIcon.style.animation = '';
                }, 600);

                setTimeout(() => {
                        this.innerHTML = 'Add to Cart';
                        this.style.background = 'linear-gradient(135deg, #FFB6C1, #DDA0DD)';
                        ripple.remove();
                    }, 2000);
                });

                // Add ripple animation
                const rippleStyle = document.createElement('style');
                rippleStyle.textContent = `
                    @keyframes cartRipple {
                        0% { width: 0; height: 0; opacity: 0.8; }
                        100% { width: 400px; height: 400px; opacity: 0; }
                    }
                `;
                document.head.appendChild(rippleStyle);
                
                // Reset button after delay
                setTimeout(() => {
                    this.innerHTML = 'Add to Cart';
                    this.style.background = 'linear-gradient(135deg, #FFB6C1, #DDA0DD)';
                    ripple.remove();
                }, 2000);

                wishlistBtn.addEventListener('click', function() {
                const productId = getProductIdFromUrl();
                console.log(`Added product ${productId} to wishlist`);
                
                // Toggle heart fill
                this.innerHTML = this.innerHTML.includes('♡') ? '♥ Added to Wishlist' : '♡ Add to Wishlist';
                
                // Add animation
                this.classList.add('pulse-animation');
                setTimeout(() => {
                    this.classList.remove('pulse-animation');
                }, 500);
            });

            // Add pulse animation style
            const pulseStyle = document.createElement('style');
            pulseStyle.textContent = `
                .pulse-animation {
                    animation: pulse 0.5s ease;
                }
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
            `;
            document.head.appendChild(pulseStyle);
        }

        // Initialize size options
        function initializeSizeOptions() {
            const sizeButtons = document.querySelectorAll('.size-options .option-btn');
            
            sizeButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    sizeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Initialize color options
        function initializeColorOptions() {
            const colorOptions = document.querySelectorAll('.color-options .color-option');
            
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Initialize image zoom effect
        function initializeImageZoom() {
            const mainImage = document.querySelector('.main-image');
            
            mainImage.addEventListener('mousemove', function(e) {
                // Get cursor position relative to the image
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Calculate percentage position
                const xPercent = x / rect.width * 100;
                const yPercent = y / rect.height * 100;
                
                // Apply subtle parallax effect to the icon
                const icon = document.getElementById('mainIcon');
                icon.style.transform = `translate(${(xPercent - 50) / 10}px, ${(yPercent - 50) / 10}px) scale(1.1)`;
            });
            
            mainImage.addEventListener('mouseleave', function() {
                // Reset transform on mouse leave
                const icon = document.getElementById('mainIcon');
                icon.style.transform = 'translate(0, 0) scale(1)';
            });
        }

        // Create sparkle effect on mouse move
        document.addEventListener('mousemove', function(e) {
            if (Math.random() > 0.97) {
                createSparkle(e.clientX, e.clientY);
            }
        });

        function createSparkle(x, y) {
            const sparkle = document.createElement('div');
            sparkle.style.position = 'fixed';
            sparkle.style.left = x + 'px';
            sparkle.style.top = y + 'px';
            sparkle.style.color = 'white';
            sparkle.style.fontSize = '12px';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.zIndex = '999';
            sparkle.innerHTML = '✨';
            sparkle.style.animation = 'sparkleAnim 1.5s ease-out forwards';
            
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                sparkle.remove();
            }, 1500);
        }

        // Add sparkle animation
        const sparkleStyle = document.createElement('style');
        sparkleStyle.textContent = `
            @keyframes sparkleAnim {
                0% {
                    opacity: 1;
                    transform: scale(0) rotate(0deg);
                }
                50% {
                    opacity: 1;
                    transform: scale(1.2) rotate(180deg);
                }
                100% {
                    opacity: 0;
                    transform: scale(0) rotate(360deg);
                }
            }
        `;
        document.head.appendChild(sparkleStyle);
    </script>
</body>
</html>